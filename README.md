# è·¨é“¾è´¨æŠ¼åè®® (Cross-Chain Staking Protocol)

## v1.0

### ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºä»¥å¤ªåŠä¿¡æ ‡é“¾è´¨æŠ¼çš„**è·¨é“¾è´¨æŠ¼åè®®**,å…è®¸ç”¨æˆ·åœ¨ Layer 2 ä¸Šè´¨æŠ¼èµ„äº§,é€šè¿‡è·¨é“¾æ¡¥å°†èµ„é‡‘æ±‡èšåˆ°ä»¥å¤ªåŠä¸»ç½‘(L1)è¿›è¡ŒéªŒè¯è€…è´¨æŠ¼,å¹¶å°†è´¨æŠ¼æ”¶ç›Šåˆ†å‘å› L2ã€‚

#### æ ¸å¿ƒç‰¹ç‚¹

- âœ… **è·¨é“¾è´¨æŠ¼**: L2 ç”¨æˆ·å¯ä»¥å‚ä¸ L1 ä»¥å¤ªåŠéªŒè¯è€…è´¨æŠ¼
- âœ… **æµåŠ¨æ€§å‡­è¯**: è´¨æŠ¼ ETH åè·å¾— dETH ä»£å¸,ä¿æŒèµ„äº§æµåŠ¨æ€§
- âœ… **ä¸‰å±‚æ”¶ç›Š**:
  - L1 æ”¶ç›Š:ä»¥å¤ªåŠéªŒè¯è€…å¥–åŠ±(ETH)
  - L2 æ”¶ç›Š:å¹³å°åŸç”Ÿä»£å¸(DappLink Token)
  - dETHå†è´¨æŠ¼åè®®çš„è´¨æŠ¼æ”¶ç›Š
- âœ… **å§”æ‰˜è´¨æŠ¼**: æ”¯æŒå°†èµ„äº§å§”æ‰˜ç»™ä¸“ä¸šè¿è¥å•†
- âœ… **çµæ´»è§£è´¨æŠ¼**: æ”¯æŒæ’é˜Ÿå–æ¬¾æœºåˆ¶,å®Œæˆåå¯å–å›èµ„äº§
- âœ… **å®‰å…¨å¯é **: é¢„è¨€æœºåŒå±‚éªŒè¯ã€æš‚åœæœºåˆ¶ã€é‡å…¥ä¿æŠ¤ç­‰å¤šé‡å®‰å…¨ä¿éšœ

#### æŠ€æœ¯æ ˆ

- **æ™ºèƒ½åˆçº¦**: Solidity 0.8.20 / 0.8.24
- **å¼€å‘æ¡†æ¶**: Foundry
- **å‡çº§æ¨¡å¼**: OpenZeppelin Upgradeable Contracts
- **è·¨é“¾é€šä¿¡**: è‡ªå®šä¹‰æ¶ˆæ¯æ¡¥æ¥åè®®

---

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

è¯¦ç»†æ¶æ„å›¾è¯·æŸ¥çœ‹ [docs/flows/architecture.md](./docs/flows/architecture.md)

#### L1 å±‚åˆçº¦æ¶æ„

| åˆçº¦åç§° | åŠŸèƒ½æè¿° | å…³é”®å‡½æ•° |
|---------|---------|---------|
| **StakingManager** | è´¨æŠ¼ç®¡ç†,ETH æ±‡èšå’Œ dETH é“¸é€  | `stake()`, `unstakeRequest()`, `allocateETH()` |
| **DETH** | è´¨æŠ¼å‡­è¯ä»£å¸(ERC20) | `mint()`, `burn()`, `transfer()` (å¸¦æ¡¥æ¥) |
| **UnstakeRequestsManager** | è§£è´¨æŠ¼è¯·æ±‚ç®¡ç†å’Œç”³é¢† | `create()`, `claim()`, `allocateETH()` |
| **OracleManager** | é¢„è¨€æœºè®°å½•éªŒè¯è€…çŠ¶æ€ | `receiveRecord()`, `validateUpdate()`, `sanityCheckUpdate()` |
| **ReturnsAggregator** | æ”¶ç›Šèšåˆå’Œè´¹ç”¨æ”¶å– | `processReturns()` |
| **ReturnsReceiver** | æ¥æ”¶éªŒè¯è€…ææ¬¾ | `transfer()` |
| **L1PoolManager** | L1 èµ„é‡‘æ± ç®¡ç† | `DepositAndStakingETH()`, `BridgeFinalizeETHForStaking()` |
| **L1Pauser** | L1 æš‚åœæ§åˆ¶ | `pauseAll()`, `unpauseAll()` |
| **L1Locator** | æœåŠ¡å®šä½å™¨ | `coreComponents()` |

#### L2 å±‚åˆçº¦æ¶æ„

| åˆçº¦åç§° | åŠŸèƒ½æè¿° | å…³é”®å‡½æ•° |
|---------|---------|---------|
| **StrategyManager** | ç­–ç•¥ç®¡ç†å’Œä»½é¢åˆ†é… | `depositETHIntoStrategy()`, `removeShares()`, `withdrawSharesAsWeth()` |
| **DelegationManager** | å§”æ‰˜ç®¡ç†å’Œè¿è¥å•†ä»½é¢ | `delegateTo()`, `undelegate()`, `queueWithdrawals()`, `completeQueuedWithdrawal()` |
| **Strategy** | å…·ä½“è´¨æŠ¼ç­–ç•¥å®ç° | `deposit()`, `withdraw()`, `shares()`, `totalShares()` |
| **L1RewardManager** | L1 æ”¶ç›Šç®¡ç†(éƒ¨ç½²åœ¨ L2) | `depositETHRewardTo()`, `claimL1Reward()` |
| **L2RewardManager** | L2 ä»£å¸æ”¶ç›Šç®¡ç† | `calculateFee()`, `stakerClaimReward()`, `operatorClaimReward()` |
| **L2PoolManager** | L2 èµ„é‡‘æ± ç®¡ç† | `WithdrawETHtoL1()`, `WithdrawWETHToL1()` |
| **L2Pauser** | L2 æš‚åœæ§åˆ¶ | `pauseAll()`, `unpauseAll()` |
| **L2Locator** | æœåŠ¡å®šä½å™¨ | `coreComponents()` |

#### æ¡¥æ¥å±‚æ¶æ„

| åˆçº¦åç§° | åŠŸèƒ½æè¿° | å…³é”®å‡½æ•° |
|---------|---------|---------|
| **TokenBridgeBase** | è·¨é“¾æ¡¥åŸºç¡€åˆçº¦ | `BridgeInitiateETH()`, `BridgeFinalizeETH()`, `BridgeInitiateStakingMessage()` |
| **MessageManager** | è·¨é“¾æ¶ˆæ¯ç®¡ç† | `sendMessage()`, `claimMessage()` |

---

### ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

#### 1. dETH (Derivative ETH)
- **å®šä¹‰**: ç”¨æˆ·è´¨æŠ¼ ETH åè·å¾—çš„å‡­è¯ä»£å¸
- **ç‰¹ç‚¹**: ERC20 æ ‡å‡†,å¯è½¬è´¦,å¯è·¨é“¾
- **æ±‡ç‡**: åŠ¨æ€æ±‡ç‡,æ ¹æ®åè®®æ€»æ§åˆ¶ ETH å’Œ dETH æ€»ä¾›åº”é‡è®¡ç®—
  ```
  dETH æ±‡ç‡ = åè®®æ€»æ§åˆ¶ ETH / dETH æ€»ä¾›åº”é‡
  ```
- **ç”¨é€”**:
  - ä½œä¸ºè´¨æŠ¼å‡­è¯
  - å¯ä»¥è½¬è´¦ç»™ä»–äºº(è‡ªåŠ¨è§¦å‘ L2 ä»½é¢è½¬ç§»)
  - è§£è´¨æŠ¼æ—¶é”€æ¯ä»¥æ¢å› ETH

#### 2. Shares (ä»½é¢)
- **å®šä¹‰**: L2 ä¸Šç”¨æˆ·åœ¨ç‰¹å®šç­–ç•¥ä¸­çš„ä»½é¢
- **è®¡ç®—**: ç”±å„ Strategy åˆçº¦æ ¹æ®å­˜å…¥é‡‘é¢å’Œå½“å‰æ±‡ç‡è®¡ç®—
- **ç®¡ç†**:
  - `stakerStrategyShares[staker][strategy]`: StrategyManager ä¸­è®°å½•
  - `operatorShares[operator][strategy]`: DelegationManager ä¸­è®°å½•è¿è¥å•†ä»½é¢

#### 3. Strategies (ç­–ç•¥)
- **å®šä¹‰**: L2 ä¸Šçš„è´¨æŠ¼ç­–ç•¥åˆçº¦,ç®¡ç†ä¸åŒç±»å‹çš„èµ„äº§
- **ç±»å‹**:
  - ETH Strategy: ç®¡ç†åŸç”Ÿ ETH
  - WETH Strategy: ç®¡ç† Wrapped ETH
  - ERC20 Strategy: ç®¡ç†å…¶ä»– ERC20 ä»£å¸

#### 4. Operators (è¿è¥å•†)
- **å®šä¹‰**: ä¸“ä¸šçš„éªŒè¯è€…è¿è¥å•†,æ¥å—ç”¨æˆ·å§”æ‰˜
- **èŒè´£**:
  - è¿è¡ŒéªŒè¯è€…èŠ‚ç‚¹
  - ç»´æŠ¤èŠ‚ç‚¹ç¨³å®šæ€§å’Œå®‰å…¨æ€§
  - è·å¾— 8% çš„ L2 ä»£å¸å¥–åŠ±

#### 5. Oracle (é¢„è¨€æœº)
- **å®šä¹‰**: é“¾ä¸‹æœåŠ¡,ç›‘æ§ä»¥å¤ªåŠéªŒè¯è€…çŠ¶æ€å¹¶æäº¤è®°å½•
- **å®‰å…¨æœºåˆ¶**:
  - **å®Œæ•´æ€§éªŒè¯** (`validateUpdate`): æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
  - **åˆç†æ€§æ£€æŸ¥** (`sanityCheckUpdate`): æ£€æŸ¥ä½™é¢å˜åŒ–æ˜¯å¦åœ¨åˆç†èŒƒå›´
  - **å¾…å¤„ç†æœºåˆ¶**: æœªé€šè¿‡åˆç†æ€§æ£€æŸ¥éœ€ç®¡ç†å‘˜å®¡æ‰¹
  - **è‡ªåŠ¨æš‚åœ**: æ£€æµ‹å¼‚å¸¸æ—¶å…¨å±€æš‚åœ

---

### ğŸ”„ å››å¤§æ ¸å¿ƒä¸šåŠ¡æµç¨‹

è¯¦ç»†æµç¨‹å›¾è¯·æŸ¥çœ‹ [docs/flows/](./docs/flows/) ç›®å½•ã€‚

#### æµç¨‹ 1: ç”¨æˆ·è´¨æŠ¼ (L1 â†’ L2)

**æ¦‚è¿°**: ç”¨æˆ·åœ¨ L1 å­˜å…¥ ETH,é€šè¿‡æ¡¥æ¥è·å¾— L2 ä»½é¢,å¹¶å¯é€‰æ‹©å§”æ‰˜ç»™è¿è¥å•†ã€‚

**ä¸»è¦æ­¥éª¤**:
1. ç”¨æˆ·åœ¨ L1PoolManager å­˜å…¥ ETH
2. Relayer è§¦å‘è´¨æŠ¼,è°ƒç”¨ StakingManager.stake()
3. StakingManager é“¸é€  dETH ç»™ç”¨æˆ·
4. ç”¨æˆ·è½¬ç§» dETH è§¦å‘è·¨é“¾æ¶ˆæ¯
5. Relayer ä¸­ç»§æ¶ˆæ¯åˆ° L2
6. L2 StrategyManager æ›´æ–°ç”¨æˆ·ä»½é¢
7. ç”¨æˆ·åœ¨ L2 å­˜å…¥ç­–ç•¥å¹¶å¯é€‰å§”æ‰˜

**è¯¦ç»†æµç¨‹å›¾**: [1-staking-flow.md](./docs/flows/1-staking-flow.md)

---

#### æµç¨‹ 2: è´¨æŠ¼å¥–åŠ±åˆ†å‘

**æ¦‚è¿°**: éªŒè¯è€…äº§ç”Ÿå¥–åŠ±,é€šè¿‡é¢„è¨€æœºè®°å½•,ç» ReturnsAggregator æ”¶å–è´¹ç”¨å,åˆ†åˆ«åˆ†å‘ L1 å’Œ L2 æ”¶ç›Šã€‚

**L1 æ”¶ç›Šåˆ†å‘**:
1. éªŒè¯è€…å¥–åŠ±è‡ªåŠ¨ææ¬¾åˆ° ReturnsReceiver
2. Oracle Updater æäº¤éªŒè¯è€…çŠ¶æ€è®°å½•
3. OracleManager éªŒè¯å¹¶è§¦å‘ ReturnsAggregator.processReturns()
4. ReturnsAggregator æ”¶å–åè®®è´¹ç”¨(é»˜è®¤ 10%)
5. EL æ”¶ç›Šæ¡¥æ¥åˆ° L2 çš„ L1RewardManager
6. CL å‡€æ”¶ç›Šè½¬å…¥ StakingManager çš„ unallocatedETH
7. ç”¨æˆ·åœ¨ L2 é€šè¿‡ L1RewardManager.claimL1Reward() ç”³é¢†

**L2 æ”¶ç›Šåˆ†å‘**:
1. ç®¡ç†å‘˜å‘ L2RewardManager å……å€¼ DappLink Token
2. é“¾ä¸‹æœåŠ¡è®¡ç®—æ”¶ç›Šå¹¶è°ƒç”¨ calculateFee()
3. è´¨æŠ¼è€…è·å¾— 92%,è¿è¥å•†è·å¾— 8%
4. ç”¨æˆ·é€šè¿‡ stakerClaimReward() ç”³é¢†

**è¯¦ç»†æµç¨‹å›¾**: [2-rewards-flow.md](./docs/flows/2-rewards-flow.md)

---

#### æµç¨‹ 3: æ’é˜Ÿå–æ¬¾ (L2 â†’ L1)

**æ¦‚è¿°**: ç”¨æˆ·å‘èµ·è§£è´¨æŠ¼,åˆ›å»ºææ¬¾è¯·æ±‚,ç­‰å¾…å®Œæˆæ¡ä»¶æ»¡è¶³ã€‚

**ä¸»è¦æ­¥éª¤**:
1. **L2 è§£å§”æ‰˜**: ç”¨æˆ·è°ƒç”¨ `DelegationManager.undelegate()` æˆ– `queueWithdrawals()`
2. **è·¨é“¾é€šçŸ¥ L1**: è°ƒç”¨ `StakingManager.unstakeRequest()`
3. **ç­‰å¾…å®Œæˆæ¡ä»¶**: åŒºå—ç­‰å¾…æœŸ + èµ„é‡‘å……è¶³
4. **æŸ¥è¯¢å¯ç”³é¢†**: `UnstakeRequestsManager.requestInfo()`

**è¯¦ç»†æµç¨‹å›¾**: [3-unstaking-flow.md](./docs/flows/3-unstaking-flow.md)

---

#### æµç¨‹ 4: å–æ¬¾å®Œæˆ

**æ¦‚è¿°**: æ¡ä»¶æ»¡è¶³å,Relayer è§¦å‘ç”³é¢†,é”€æ¯ dETH,æ¡¥æ¥ ETH åˆ° L2,ç”¨æˆ·å®Œæˆææ¬¾ã€‚

**ä¸»è¦æ­¥éª¤**:
1. **Relayer è§¦å‘ L1 ç”³é¢†**: `StakingManager.claimUnstakeRequest()`
2. **ETH æ¡¥æ¥åˆ° L2**: `BridgeInitiateETH()` â†’ Relayer ä¸­ç»§ â†’ `BridgeFinalizeETH()`
3. **åŒæ­¥ L1 è¿”è¿˜ä»½é¢**: `StrategyManager.migrateRelatedL1StakerShares()`
4. **L2 å®Œæˆææ¬¾**: `DelegationManager.completeQueuedWithdrawal()`

**è¯¦ç»†æµç¨‹å›¾**: [4-withdrawal-flow.md](./docs/flows/4-withdrawal-flow.md)

---

### ğŸ‘¥ è§’è‰²å’Œæƒé™

| è§’è‰² | æè¿° | ä¸»è¦èŒè´£ |
|------|------|----------|
| **ç”¨æˆ· (User)** | æ™®é€šè´¨æŠ¼ç”¨æˆ· | è´¨æŠ¼ã€è§£è´¨æŠ¼ã€ç”³é¢†å¥–åŠ±ã€å§”æ‰˜ |
| **Relayer** | è·¨é“¾æ¶ˆæ¯ä¸­ç»§è€… | ç›‘å¬äº‹ä»¶ã€ä¸­ç»§æ¶ˆæ¯ã€è§¦å‘è·¨é“¾æ“ä½œ |
| **Oracle Updater** | é¢„è¨€æœºæ›´æ–°è€… | æäº¤éªŒè¯è€…çŠ¶æ€è®°å½• |
| **Admin** | ç³»ç»Ÿç®¡ç†å‘˜ | è®¾ç½®åˆçº¦å‚æ•°ã€æˆäºˆè§’è‰²ã€åº”æ€¥ç®¡ç† |
| **Operator** | éªŒè¯è€…è¿è¥å•† | è¿è¡ŒéªŒè¯è€…èŠ‚ç‚¹ã€æ¥å—å§”æ‰˜ |

#### æƒé™çŸ©é˜µ

| åŠŸèƒ½ | ç”¨æˆ· | Relayer | Oracle | Admin |
|------|:----:|:-------:|:------:|:-----:|
| è´¨æŠ¼ ETH | âœ… | âŒ | âŒ | âŒ |
| æ¡¥æ¥è´¨æŠ¼ | âŒ | âœ… | âŒ | âŒ |
| æäº¤é¢„è¨€æœºè®°å½• | âŒ | âŒ | âœ… | âŒ |
| åˆ†é… ETH | âŒ | âŒ | âŒ | âœ… |
| å¯åŠ¨éªŒè¯è€… | âŒ | âŒ | âŒ | âœ… |
| å‘èµ·è§£è´¨æŠ¼ | âœ… | âŒ | âŒ | âŒ |
| ç”³é¢†è§£è´¨æŠ¼ | âŒ | âœ… | âŒ | âŒ |
| å®Œæˆææ¬¾ | âœ… | âŒ | âŒ | âŒ |
| æš‚åœåˆçº¦ | âŒ | âŒ | âŒ | âœ… |

---

### âš™ï¸ å…³é”®å‚æ•°é…ç½®

#### é‡‘é¢é™åˆ¶å‚æ•°

| å‚æ•°åç§° | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `minimumDepositAmount` | 32 ETH | StakingManager æœ€å°è´¨æŠ¼é‡‘é¢ |
| `minimumUnstakeBound` | 0.01 ETH | æœ€å°è§£è´¨æŠ¼é‡‘é¢ |
| `maximumDETHSupply` | 1024 ETH | dETH æœ€å¤§ä¾›åº”é‡ |

#### æ—¶é—´é™åˆ¶å‚æ•°

| å‚æ•°åç§° | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `numberOfBlocksToFinalize` | å¯é…ç½® | è§£è´¨æŠ¼è¯·æ±‚å®Œæˆæ‰€éœ€åŒºå—æ•° |
| `finalizationBlockNumberDelta` | 64 blocks | é¢„è¨€æœºè®°å½• Finalize ç­‰å¾…æœŸ |

#### è´¹ç‡å‚æ•°

| å‚æ•°åç§° | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `feesBasisPoints` | 1000 (10%) | åè®®è´¹ç”¨æ¯”ä¾‹ |
| `stakerPercent` | 92% | è´¨æŠ¼è€…æ”¶ç›Šå æ¯” |
| `operatorPercent` | 8% | è¿è¥å•†æ”¶ç›Šå æ¯” |

---

### ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

#### 1. æš‚åœæœºåˆ¶
- L1: å¯æš‚åœè´¨æŠ¼ã€è§£è´¨æŠ¼ã€éªŒè¯è€…å¯åŠ¨ã€é¢„è¨€æœºæäº¤
- L2: å¯æš‚åœç­–ç•¥å­˜æ¬¾ã€å§”æ‰˜ã€è§£å§”æ‰˜ã€ææ¬¾
- è§¦å‘: ç®¡ç†å‘˜æ‰‹åŠ¨æˆ–é¢„è¨€æœºæ£€æµ‹å¼‚å¸¸è‡ªåŠ¨è§¦å‘

#### 2. é¢„è¨€æœºåŒå±‚éªŒè¯
- **å®Œæ•´æ€§éªŒè¯**: æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§,å¤±è´¥åˆ™å›æ»š
- **åˆç†æ€§æ£€æŸ¥**: æ£€æŸ¥ä½™é¢å˜åŒ–æ˜¯å¦åˆç†,å¤±è´¥åˆ™å¾…å¤„ç†
- **å¾…å¤„ç†æœºåˆ¶**: å¼‚å¸¸è®°å½•éœ€ç®¡ç†å‘˜å®¡æ‰¹
- **è‡ªåŠ¨æš‚åœ**: æ£€æµ‹å¼‚å¸¸è‡ªåŠ¨è§¦å‘å…¨å±€æš‚åœ

#### 3. Finalize æ£€æŸ¥
é˜²æ­¢ææ¬¾å›æ»š,ç¡®ä¿æäº¤çš„é¢„è¨€æœºè®°å½•å¯¹åº”çš„åŒºå—å·²ç» Finalize

#### 4. é‡å…¥ä¿æŠ¤
ä½¿ç”¨ OpenZeppelin `ReentrancyGuard`,å…³é”®å‡½æ•°æ ‡è®° `nonReentrant`

#### 5. è®¿é—®æ§åˆ¶
åŸºäºè§’è‰²çš„æƒé™ç®¡ç†(RBAC),ä½¿ç”¨ OpenZeppelin `AccessControlEnumerable`

---

### ğŸ’» å¼€å‘æŒ‡å—

#### ç¯å¢ƒè¦æ±‚

- **Solidity**: ^0.8.20 / ^0.8.24
- **Foundry**: æœ€æ–°ç‰ˆæœ¬
  ```bash
  curl -L https://foundry.paradigm.xyz | bash
  foundryup
  ```

#### å®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd Crosschain-contract

# å®‰è£… Foundry ä¾èµ–
forge install
```

#### ç¼–è¯‘åˆçº¦

```bash
# ç¼–è¯‘æ‰€æœ‰åˆçº¦
forge build

# æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
forge build --force
```

#### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
forge test

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
forge test -vvvv

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
forge coverage
```

#### æ ¼å¼åŒ–ä»£ç 

```bash
# æ ¼å¼åŒ–æ‰€æœ‰ Solidity æ–‡ä»¶
forge fmt

# æ£€æŸ¥æ ¼å¼(ä¸ä¿®æ”¹)
forge fmt --check
```

---

### â“ FAQ (å¸¸è§é—®é¢˜)

#### Q1: dETH çš„æ±‡ç‡å¦‚ä½•è®¡ç®—?

**A**: dETH çš„æ±‡ç‡åŠ¨æ€è°ƒæ•´,å…¬å¼ä¸º:
```
dETH æ±‡ç‡ = åè®®æ€»æ§åˆ¶ ETH / dETH æ€»ä¾›åº”é‡
```
å½“éªŒè¯è€…äº§ç”Ÿå¥–åŠ±æ—¶,åè®®æ€»æ§åˆ¶ ETH å¢åŠ ,dETH æ±‡ç‡ä¸Šå‡ã€‚

#### Q2: ä¸ºä»€ä¹ˆå« L1RewardManager å´éƒ¨ç½²åœ¨ L2?

**A**: `L1RewardManager` è™½ç„¶éƒ¨ç½²åœ¨ L2,ä½†å®ƒç®¡ç†çš„æ˜¯ä» L1 æ¡¥æ¥è¿‡æ¥çš„ ETH è´¨æŠ¼æ”¶ç›Š,å› æ­¤å‘½åä¸º L1RewardManagerã€‚

#### Q3: è§£è´¨æŠ¼éœ€è¦å¤šé•¿æ—¶é—´?

**A**: è§£è´¨æŠ¼æ—¶é—´å–å†³äº:
1. åŒºå—ç­‰å¾…æœŸ: `numberOfBlocksToFinalize` ä¸ªåŒºå—
2. èµ„é‡‘å¯ç”¨æ€§: UnstakeRequestsManager ä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH

#### Q4: ä¸ºä»€ä¹ˆéœ€è¦ Relayer?

**A**: Relayer è´Ÿè´£:
1. ç›‘å¬ L1 å’Œ L2 çš„è·¨é“¾äº‹ä»¶
2. ä¸­ç»§æ¶ˆæ¯åˆ°ç›®æ ‡é“¾
3. è§¦å‘éœ€è¦æƒé™çš„æ“ä½œ
4. åŒæ­¥ L1 å’Œ L2 çš„çŠ¶æ€

#### Q5: å¦‚ä½•æˆä¸ºè¿è¥å•†?

**A**: è°ƒç”¨ `DelegationManager.registerAsOperator(operatorDetails, metadataURI)` æ³¨å†Œä¸ºè¿è¥å•†ã€‚

#### Q6: åè®®è´¹ç”¨å¦‚ä½•æ”¶å–?

**A**: åè®®ä» L1 éªŒè¯è€…å¥–åŠ±ä¸­æ”¶å–:
- é»˜è®¤è´¹ç‡: 10%
- ä»…ä»å¥–åŠ±ä¸­æ”¶å–,æœ¬é‡‘ä¸æ”¶è´¹

---

